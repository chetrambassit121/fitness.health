{% extends 'basetwo.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block content %}



<div class="fh5co-parallax largerbanner" style="background-image: url(/static/images/fitnesspic2.jpg);">
    {% comment %} <div class="container">    {% endcomment %}
        {% comment %} <div class="row"> {% endcomment %}
			{% comment %} <div class="col-md-8 col-md-offset-2 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-center fh5co-table"> {% endcomment %}
            {% comment %} <div class="fh5co-intro fh5co-table-cell animate-box"> {% endcomment %}
    <section class="content-item" id="comments">
        <div class="container">   
        <div class="col-sm-8 col-md-offset-2">  
            {% comment %} <div class="row justify-content-center"> {% endcomment %}
                <h2 style="color: white;" class="row justify-content-center">Comments</h2>
                {% comment %} <div class="row mt-5"> {% endcomment %}
                    {% comment %} <div class="col-md-5 col-sm-6"> {% endcomment %}
                <h2 class="row justify-content-center"><a href="{% url 'post-list' %}" class="btn btn-light row justify-content-center">Back To Posts</a></h2>
                    {% comment %} </div> {% endcomment %}
            {% comment %} </div> {% endcomment %}
            {% if post.shared_user %}
                <div class="media">
                    {% comment %} <a class="pull-left" href="#"><img class="media-object" src="https://bootdey.com/img/Content/avatar/avatar1.png" alt=""></a> {% endcomment %}
                    <a class="pull-left" href="{% url 'show_profile_page' post.shared_user.profile.pk %}"> 
                        <img src="{{ post.shared_user.profile.picture.url }}" alt="" class="shared-image">
                        {% comment %} <small class="postauthor">{{ post.shared_user }}</small> {% endcomment %}
                    </a>
                    <div class="media-body">
                        {% comment %} {% if post.body %} {% endcomment %}
                        <h4 class="media-heading">{{ post.shared_user }} shared a post {% if request.user == post.shared_user %}<a href="{% url 'post-delete' post.pk %}" class="red"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                            <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                          </svg></a>{% endif %}</h4>
                        
                            
                            {% comment %} <p>**{{ user.username }} can delete this Shared Post**</p> {% endcomment %}
                        
                        <p class="white">{{ post.shared_body }}</p>
                        {% comment %} <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p> {% endcomment %}
                        <ul class="list-unstyled list-inline media-detail pull-left">
                            <li><i class="fa fa-calendar"></i>{{post.created_on}}</li>
                            {% comment %} <li class=""><a href="{% url 'post-detail' post.pk %}" class="">Comments:{{ comment.count }}</a></li> {% endcomment %}

                            {% comment %} <li><i class="fa fa-thumbs-up"></i>13</li> {% endcomment %}
                        </ul>
                        
                        <ul class="list-unstyled list-inline media-detail pull-right">
                            <li class="">
                                <form method="POST" action="{% url 'like' post.id %}" class="like-form" id="{{post.id}}">
                                    {% csrf_token %}
                                    {% if user not in post.likes.all %}
                                        <input type="hidden"  name="post_id" value="{{ post.id }}">
                                        <button class=" thumbs-btn like-btn{{post.id}}" type="submit">
                                            <i class="fa fa-thumbs-up thumbs like-icon{{post.id}}" ><span class="like_count{{post.id}}">{{ post.likes.all.count }}</span></i>
                                        </button>
                                    {% else %}
                                        <input type="hidden" name="post_id" value="{{ post.id }}">
                                        <button class=" thumbs-btn thumbs-fillgreen like-btn{{post.id}}" type="submit">
                                            <i class="fa fa-thumbs-up thumbs like-icon{{post.id}}"><span class="like_count{{post.id}}">{{ post.likes.all.count }}</span></i>
                                        </button>
                                    {% endif %}
                                </form>
                            </li>
                            <li class="">
                                <form method="POST" action="{% url 'dislike' post.id %}" class="dislike-form thumb-buttons" id='{{post.id}}'>
                                    {% csrf_token %}
                                    {% if user not in post.dislikes.all %}
                                        <input type="hidden" name="post_id" value="{{ post.id }}">
                                        <button class="thumbs-btn dislike-btn{{post.id}}" type="submit" >
                                            <i class="fa fa-thumbs-down thumbs dislike-icon{{post.id}}" > <span class="dislike_count{{post.id}}">{{ post.dislikes.all.count }}</span></i>
                                        </button>
                                    {% else %}
                                        <input type="hidden" name="post_id" value="{{ post.id }}">
                                        <button class=" thumbs-btn thumbs-fillred dislike-btn{{post.id}}" type="submit" >
                                            <i class="fa fa-thumbs-down thumbs dislike-icon{{post.id}}" > <span class="dislike_count{{post.id}}">{{ post.dislikes.all.count }}</span></i>
                                        </button>
                                    {% endif %}
                                </form>
                            </li>
                        </ul>
                        
                    {% comment %} {% endif %} {% endcomment %}
                    </div>
                </div>
                <div class="media sharedpost sharedpostbody" style="border-top: none !important;">
                    <a href="{% url 'show_profile_page' post.author.profile.pk %}"> 
                        <img src="{{ post.author.profile.picture.url }}" alt="" class="shared-image" style="margin: 8px;">
                    </a>
                    <div class="media-body sharedpostbody">
                        <h4 class="media-heading">{{ post.author }} created a post</h4>
                        <p class="white">{{ post.body }}</p>
                        {% if post.image %}
                            <div class="ajax_image" style="">
                                <img src="{{ post.image.url }}" class="comment-image"/>
                            </div>
                        {% endif %}
                        {% if post.video %}
                            <video class="embed-responsive embed-responsive-16by9" controls="controls" class="comment-image">
                                <source src="{{post.video.url}}" type="video/mp4" />
                            </video>
                        {% endif %}
                        {% comment %} <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p> {% endcomment %}
                        <ul class="list-unstyled list-inline media-detail pull-left">
                            <li><i class="fa fa-calendar"></i>{{post.shared_on}}</li>
                            {% comment %} <li><i class="fa fa-thumbs-up"></i>13</li> {% endcomment %}
                        </ul>
                        <ul class="list-unstyled list-inline media-detail pull-right">
                        </ul>
                        {% comment %} {% endif %} {% endcomment %}
                    </div>
                </div>
            {% else %}
                <div class="media">
                
                    <a class="pull-left" href="{% url 'show_profile_page' post.author.profile.pk %}"> 
                        <img src="{{ post.author.profile.picture.url }}" alt="" class="media-object shared-image">
                        {% comment %} <small class="postauthor">{{ post.shared_user }}</small> {% endcomment %}
                    </a>
                    
                    <div class="media-body">
                        {% comment %} {% if post.body %} {% endcomment %}
                        <h4 class="media-heading">{{ post.author }} created a post {% if request.user == post.author %}<a href="{% url 'post-delete' post.pk %}" class="red"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                            <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                          </svg></a>{% endif %}</h4>
                        <p class="white">{{ post.body }}</p>
                        {% if post.image %}
                            <div class="ajax_image" style="">
                                <img src="{{ post.image.url }}" class="comment-image"/>
                            </div>
                        {% endif %}
                        {% if post.video %}
                            <video class="embed-responsive embed-responsive-16by9" controls="controls" class="comment-image">
                                <source src="{{post.video.url}}" type="video/mp4" />
                            </video>
                        {% endif %}
                        {% comment %} <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p> {% endcomment %}
                        <ul class="list-unstyled list-inline media-detail pull-left">
                            <li><i class="fa fa-calendar"></i>{{ post.created_on }}</li>
                            {% comment %} <li class=""><a href="{% url 'post-detail' post.pk %}" class="">Comments:{{ comment.count }}</a></li> {% endcomment %}
                            {% comment %} <li><i class="fa fa-thumbs-up"></i>13</li> {% endcomment %}
                        </ul>
                        <ul class="list-unstyled list-inline media-detail pull-right">
                            <li class="">
                                <form method="POST" action="{% url 'like' post.id %}" class="like-form" id="{{post.id}}">
                                    {% csrf_token %}
                                    {% if user not in post.likes.all %}
                                        <input type="hidden"  name="post_id" value="{{ post.id }}">
                                        <button class=" thumbs-btn like-btn{{post.id}}" type="submit">
                                            <i class="fa fa-thumbs-up thumbs like-icon{{post.id}}" ><span class="like_count{{post.id}}">{{ post.likes.all.count }}</span></i>
                                        </button>
                                    {% else %}
                                        <input type="hidden" name="post_id" value="{{ post.id }}">
                                        <button class=" thumbs-btn thumbs-fillgreen like-btn{{post.id}}" type="submit">
                                            <i class="fa fa-thumbs-up thumbs like-icon{{post.id}}"><span class="like_count{{post.id}}">{{ post.likes.all.count }}</span></i>
                                        </button>
                                    {% endif %}
                                </form>
                            </li>
                            <li class="">
                                <form method="POST" action="{% url 'dislike' post.id %}" class="dislike-form thumb-buttons" id='{{post.id}}'>
                                    {% csrf_token %}
                                    {% if user not in post.dislikes.all %}
                                        <input type="hidden" name="post_id" value="{{ post.id }}">
                                        <button class="thumbs-btn dislike-btn{{post.id}}" type="submit" >
                                            <i class="fa fa-thumbs-down thumbs dislike-icon{{post.id}}" > <span class="dislike_count{{post.id}}">{{ post.dislikes.all.count }}</span></i>
                                        </button>
                                    {% else %}
                                        <input type="hidden" name="post_id" value="{{ post.id }}">
                                        <button class=" thumbs-btn thumbs-fillred dislike-btn{{post.id}}" type="submit" >
                                            <i class="fa fa-thumbs-down thumbs dislike-icon{{post.id}}" > <span class="dislike_count{{post.id}}">{{ post.dislikes.all.count }}</span></i>
                                        </button>
                                    {% endif %}
                                </form>
                            </li>
                        </ul>
                        {% comment %} {% endif %} {% endcomment %}
                    </div>
                </div>
            {% endif %}
            <form method="POST" enctype="multipart/form-data" class="top">
                {% comment %} <h3 class="pull-left">New Posts</h3> {% endcomment %}
                {% comment %} <button type="submit" class="btn btn-normal pull-right">Submit</button> {% endcomment %}
                <fieldset>
                    <div class="row">
                        <div class="col-sm-3 col-lg-2 hidden-xs">
                            <a href="{% url 'show_profile_page' request.user.profile.pk %}"><img class="shared-image" src="{{ request.user.profile.picture.url }}"></a>
                            {% comment %} <img class="img-responsive" src="https://bootdey.com/img/Content/avatar/avatar1.png" alt=""> {% endcomment %}
                        </div>
                        <div class="form-group col-xs-12 col-sm-9 col-lg-10">
                            <form class="form-control" id="message" placeholder="Your message" >
                                <div class="form-group">
                                    {% csrf_token %}
                                    {{ form | crispy }}
                                    {{ video_form | crispy }}
                                    {% comment %} <textarea name="msg" id=""msg cols="30" rows="5" class="form-control" style="background-color: black;"></textarea> {% endcomment %}
                                    {% comment %} <h4 style="color: white;">Leave a post</h4>
                                    <label for="message">Message</label>
                                    <textarea name="msg" id=""msg cols="30" rows="5" class="form-control" style="background-color: black;"></textarea> {% endcomment %}
                                </div>
                                {% comment %} <div class="form-group">
                                    <label for="name">Name</label>
                                    <input type="text" name="name" id="fullname" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="text" name="email" id="email" class="form-control">
                                </div> {% endcomment %}
                                {% comment %} <div class="form-group">
                                    <p class="text-secondary">If you have a <a href="#" class="alert-link">gravatar account</a> your address will be used to display your profile picture.</p>
                                </div> {% endcomment %}
                                {% comment %} <div class="form-inline">
                                    <input type="checkbox" name="check" id="checkbx" class="mr-1">
                                    <label for="subscribe">Subscribe me to the newsletter</label>
                                </div> {% endcomment %}
                                <div class="form-group">
                                    {% comment %} <button id="post" class="btn">Post</button> {% endcomment %}
                                    <button type="submit" id='btn' class="btn btn-success mt-3">Comment</button>
                                </div>
                            </form>
                            {% comment %} <textarea class="form-control" id="message" placeholder="Your message" required=""></textarea> {% endcomment %}
                        </div>
                    </div>  	
                </fieldset>
            </form>
            {% for comment in comments %}
                {% if comment.is_parent %}
                    <div class="media">
                        {% comment %} <a class="pull-left" href="#"><img class="media-object" src="https://bootdey.com/img/Content/avatar/avatar1.png" alt=""></a> {% endcomment %}
                        <a class="pull-left" href="{% url 'show_profile_page' comment.author.profile.pk %}"> 
                            <img src="{{ comment.author.profile.picture.url }}" alt="" class="shared-image">
                            {% comment %} <small class="postauthor">{{ post.shared_user }}</small> {% endcomment %}
                        </a>
                        <div class="media-body">
                            {% comment %} {% if post.body %} {% endcomment %}
                            <h4 class="media-heading">{{ comment.author }} created a comment {% if request.user == comment.author %}
                                <a href="{% url 'comment-delete' post.pk comment.pk %}" class="red"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                                    <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                                  </svg></a>{% endif %}</h4>
                            <p class="white">{{ comment.comment }}</p>
                            {% comment %} <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p> {% endcomment %}
                            <ul class="list-unstyled list-inline media-detail pull-left">
                                <li><i class="fa fa-calendar"></i>{{comment.created_on}}</li>
                                {% comment %} <li><i class="fa fa-thumbs-up"></i>13</li> {% endcomment %}
                            </ul>
                            
                            <ul class="list-unstyled list-inline media-detail pull-right">
                                <li>
                                    <div class="d-flex flex-row">
                                        <button class="remove-default-btn reply-button"><a href="{% url 'view-comment-reply' comment.pk %}">View Replies: {{comment.children.all.count}}</a></button>
                                        &nbsp;&nbsp;
                                        {% comment %} <button class="remove-default-btn reply-button" onclick="myFunction()">Reply Form</button> {% endcomment %}
                                    </div>
                                </li>
                                <li class="">
                                    <form method="POST" action="{% url 'comment-like' post.pk comment.pk %}" class="like-form" id="{{comment.pk}}">
                                        {% csrf_token %}
                                        {% if request.user in comment.likes.all %}
                                            <input type="hidden" name="comment_pk" value="{{ comment.pk }}">
                                            <button class="remove-default-btn thumbs-btn thumbs-fillgreen like-btn{{comment.pk}}" type="submit">
                                                <i class="fa fa-thumbs-up thumbs like-icon{{comment.pk}}"> <span class="like_count{{comment.pk}}">{{ comment.likes.all.count }}</span></i>
                                            </button>
                                        {% else %}
                                            <input type="hidden" name="comment_pk" value="{{ comment.pk }}">
                                            <button class="remove-default-btn thumbs-btn like-btn{{comment.pk}}" type="submit">
                                                <i class="fa fa-thumbs-up thumbs like-icon{{comment.pk}}" > <span class="like_count{{comment.pk}}">{{ comment.likes.all.count }}</span></i>
                                            </button>
                                        {% endif %}
                                    </form>
                                </li>
                             
                                <li class="">
                                    <form method="POST" action="{% url 'comment-dislike' post.pk comment.pk %}" class="dislike-form" id="{{comment.pk}}">
                                        {% csrf_token %}
                                        {% if request.user in comment.dislikes.all %}
                                            <input type="hidden" name="comment_pk" value="{{ comment.pk }}">
                                            <button class="remove-default-btn thumbs-btn thumbs-fillred dislike-btn{{comment.pk}}" type="submit">
                                                <i class="fa fa-thumbs-down thumbs dislike-icon{{comment.pk}}" > <span class="dislike_count{{comment.id}}">{{ comment.dislikes.all.count }}</span></i>
                                            </button>
                                        {% else %}
                                            <input type="hidden" name="comment_pk" value="{{ comment.pk }}">
                                            <button class="remove-default-btn thumbs-btn dislike-btn{{comment.pk}}" type="submit">
                                                <i class="fa fa-thumbs-down thumbs dislike-icon{{comment.pk}}" > <span class="dislike_count{{comment.pk}}">{{ comment.dislikes.all.count }}</span></i>
                                            </button>
                                        {% endif %}
                                    </form>
                                </li>
                            </ul>
                            {% comment %} <div class="d-flex flex-row">
                                <button class="remove-default-btn reply-button"><a href="{% url 'view-comment-reply' comment.pk %}">Replies: {{comment.children.all.count}}</a></button>
                                &nbsp;&nbsp;
                                <button onclick="myFunction()">Try it</button>
                            </div> {% endcomment %}
                        {% comment %} {% endif %} {% endcomment %}
                        </div>
                       
                    </div>
                  
                    <div class="{{comment.pk}}" id="replyform">
                        <div class="media marginleft reply-form" style="border-top: none !important; margin-top: none !important;">
                            <div class="media-body" >
                                <form method="POST" class="reply-form" data-toggle='reply-form' data-target="{{comment.pk}}" value="{{comment.pk}}" action="{% url 'comment-reply' post.pk comment.pk %}">
                                    {% csrf_token %}
                                    {{ form | crispy }}
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-success mt-3">Reply</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    {% comment %} <div>
                        <button class="remove-default-btn"><i class="fa fa-comment-dots" onclick="myFunction('n{{ comment.pk }}')"></i></button>
                    </div>
                    <div class="media marginleft reply-form" id="n{{ comment.pk }}" style="border-top: none !important; margin-top: none !important;">
                        <div class="media-body" >
                            <form method="POST" class="reply-form" action="{% url 'comment-reply' post.pk comment.pk %}">
                                {% csrf_token %}
                                {{ form | crispy }}
                                <div class="d-grid gap-2">
                                    <button class="btn btn-success mt-3">Reply</button>
                                </div>
                            </form>
                        </div>
                    </div> {% endcomment %}
                   
                {% endif %}
                {% include 'social/replies.html' %}
            {% endfor %}
        </div>
        </div>
        <div class="row justify-content-center mt-3 page ">
            <div class="col-md-5 col-sm-12 position-relative">
                <p style="color: white !important">Page {{ comments.number }} of {{ comments.paginator.num_pages }}</p>
                {% if comments.has_previous %}
                <div class="d-flex flex-row">
                    <p><a href="?page=1">&laquo First</a></p>
                    <p><a href="?page={{ comments.previous_page_number }}">Previous</a></p>
                </div>
                {% endif %}
        
                {% comment %} Page {{ comments.number }} of {{ comments.paginator.num_pages }} {% endcomment %}
        
                {% if comments.has_next %}
                <div class="d-flex flex-row">
                    <p><a href="?page={{ comments.next_page_number }}">Next</a></p>&nbsp;&nbsp;&nbsp;&nbsp;
                    <p><a href="?page={{ comments.paginator.num_pages }}">Last &raquo</a></p>
                </div>
                {% endif %}
                </div>
            </div>
        </div>
    </section>
</div>




{% comment %} <script>
    function myFunction() {
      var x = document.getElementById("myDIV");
      if (x.style.display === "none") {
        x.style.display = "block";
      } else {
        x.style.display = "none";
      }
    }
</script> {% endcomment %}

{% comment %} <script type="text/javascript">
    function commentReplyToggle(parent_id) {
        const row = document.getElementById(parent_id);
    
        if (row.classList.contains('d-none')) {
            row.classList.remove('d-none');
        } else {
            row.classList.add('d-none');
        }
    }
</script>  {% endcomment %}
{% comment %} <script>
    function myFunction() {
    document.addEventListener(
        "click",
        function(event) {
            var target = event.target;
            var replyForm;
            if (target.matches("[data-toggle='reply-form']")) {
                replyForm = document.getElementById(target.getAttribute("data-target"));
                replyForm.classList.toggle("d-none");
            }
        },
        false
    )};
</script> {% endcomment %}

<script>
    function myFunction() {
      var x = document.getElementsByClassName("d-none {{comment.pk}}");
      if (x.classList.contains('d-none')) {
        x.classList.remove('d-none');
      } else {
        x.classList.add('d-none')
      }
    }
</script>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>


{% comment %} <script type="text/javascript">
    function commentReplyToggle(parent_id) {
        const row = document.getElementById(parent_id);
    
        if (row.classList.contains('d-none')) {
            row.classList.remove('d-none');
        } else {
            row.classList.add('d-none');
        }
    }
</script>

<script>
    function myFunction() {
      var x = document.getElementById("n{{ comment.pk }}");
      if (x.style.display === "none") {
        x.style.display = "block";
      } else {
        x.style.display = "none";
      }
    }
</script>  {% endcomment %}

<script type="text/javascript">
    $(document).ready(function(){
         
        $('.like-form').submit(function(e){
            e.preventDefault();
            const post_id=$(this).attr('id')
            const likeText = $(`.like-btn${post_id}`).text()
            const trim = $.trim(likeText)
            const url=$(this).attr('action') 
            let res;
            const like = $(`.like_count${post_id}`).text()
            $.ajax({
                method:"POST",
                url:url,
                data:{
                    'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
                    'post_id':post_id,
                },
                success:function(response){
                    if(response.liked===true){
                        $(`.like-icon${post_id}`).addClass('thumbs-fillgreen')
                    }else{
                        $(`.like-icon${post_id}`).removeClass('thumbs-fillgreen')
                    }
                    if(response.liked===true){
                        $(`.like-btn${post_id}`).addClass('thumbs-fillgreen')
                    }else{
                        $(`.like-btn${post_id}`).removeClass('thumbs-fillgreen')
                    }
                    if(response.disliked===true){
                        $(`.dislike-icon${post_id}`).addClass("thumbs-fillred")
                    }else{
                        $(`.dislike-icon${post_id}`).removeClass("thumbs-fillred")
                    }
                    if(response.disliked===true){
                        $(`.dislike-btn${post_id}`).addClass("thumbs-fillred")
                    }else{
                        $(`.dislike-btn${post_id}`).removeClass("thumbs-fillred")
                    }
                    likes=$(`.like_count${post_id}`).text(response.likes_count)
                    parseInt(likes)
                    dislikes=$(`.dislike_count${post_id}`).text(response.dislikes_count)
                    parseInt(dislikes)
                },
                error:function(response){
                    console.log("Failed ", response)
                }
            })
        });


        $('.dislike-form').submit(function(e){
            e.preventDefault();  
            const post_id = $(this).attr('id')
            const dislikeText = $(`.dislike-btn${post_id}`).text()
            const trim = $.trim(dislikeText)
            const url =$(this).attr('action') 
            let res;
            const dislike = $(`.dislike_count${post_id}`).text()
            
            $.ajax({
                method:"POST",
                url:url,
                data:{
                    'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
                    'post_id':post_id,
                },
                success:function(response){
                    if(response.disliked===true){
                      $(`.dislike-icon${post_id}`).addClass("thumbs-fillred")
                    }else{
                      $(`.dislike-icon${post_id}`).removeClass("thumbs-fillred")
                    }
                    if(response.disliked===true){
                        $(`.dislike-btn${post_id}`).addClass("thumbs-fillred")
                      }else{
                        $(`.dislike-btn${post_id}`).removeClass("thumbs-fillred")
                    }
                    if(response.liked===true){
                      $(`.like-icon${post_id}`).addClass('thumbs-fillgreen')
                    }else{
                      $(`.like-icon${post_id}`).removeClass('thumbs-fillgreen')
                    }
                    if(response.liked===true){
                        $(`.like-btn${post_id}`).addClass('thumbs-fillgreen')
                      }else{
                        $(`.like-btn${post_id}`).removeClass('thumbs-fillgreen')
                    }
                    likes=$(`.like_count${post_id}`).text(response.likes_count)
                    parseInt(likes)
                    dislikes=$(`.dislike_count${post_id}`).text(response.dislikes_count)
                    parseInt(dislikes)
                },
                error:function(response){
                    console.log('failed', response)
                }
            }) 
        });

    });
</script>










<script type="text/javascript">
    $(document).ready(function(){
        $('.like-form').submit(function(e){
            e.preventDefault();
            const comment_pk=$(this).attr('id')
            const likeText = $(`.like-btn${comment_pk}`).text()
            const trim = $.trim(likeText)
            const url=$(this).attr('action') 
            let res;
            const like = $(`.like_count${comment_pk}`).text()
            $.ajax({
                method:"POST",
                url:url,
                data:{
                    'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
                    'comment_pk':comment_pk,
                },
                success:function(response){
                    if(response.liked===true){
                        $(`.like-icon${comment_pk}`).addClass('thumbs-fillgreen')
                    }else{
                        $(`.like-icon${comment_pk}`).removeClass('thumbs-fillgreen')
                    }
                    if(response.liked===true){
                        $(`.like-btn${comment_pk}`).addClass('thumbs-fillgreen')
                    }else{
                        $(`.like-btn${comment_pk}`).removeClass('thumbs-fillgreen')
                    }
                    if(response.disliked===true){
                        $(`.dislike-icon${comment_pk}`).addClass("thumbs-fillred")
                    }else{
                        $(`.dislike-icon${comment_pk}`).removeClass("thumbs-fillred")
                    }
                    if(response.disliked===true){
                        $(`.dislike-btn${comment_pk}`).addClass("thumbs-fillred")
                    }else{
                        $(`.dislike-btn${comment_pk}`).removeClass("thumbs-fillred")
                    }
                    likes=$(`.like_count${comment_pk}`).text(response.likes_count)
                    parseInt(likes)
                    dislikes=$(`.dislike_count${comment_pk}`).text(response.dislikes_count)
                    parseInt(dislikes)
                },
                error:function(response){
                    console.log("Failed ", response)
                }
            })
        });

        $('.dislike-form').submit(function(e){
            e.preventDefault();  
            const comment_pk = $(this).attr('id')
            const dislikeText = $(`.dislike-btn${comment_pk}`).text()
            const trim = $.trim(dislikeText)
            const url =$(this).attr('action') 
            let res;
            const dislike = $(`.dislike_count${comment_pk}`).text()
            
            $.ajax({
                method:"POST",
                url:url,
                data:{
                    'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
                    'comment_pk':comment_pk,
                },
                success:function(response){
                    if(response.disliked===true){
                      $(`.dislike-icon${comment_pk}`).addClass("thumbs-fillred")
                    }else{
                      $(`.dislike-icon${comment_pk}`).removeClass("thumbs-fillred")
                    }
                    if(response.disliked===true){
                        $(`.dislike-btn${comment_pk}`).addClass("thumbs-fillred")
                      }else{
                        $(`.dislike-btn${comment_pk}`).removeClass("thumbs-fillred")
                    }
                    if(response.liked===true){
                      $(`.like-icon${comment_pk}`).addClass('thumbs-fillgreen')
                    }else{
                      $(`.like-icon${comment_pk}`).removeClass('thumbs-fillgreen')
                    }
                    if(response.liked===true){
                        $(`.like-btn${comment_pk}`).addClass('thumbs-fillgreen')
                      }else{
                        $(`.like-btn${comment_pk}`).removeClass('thumbs-fillgreen')
                    }
                    likes=$(`.like_count${comment_pk}`).text(response.likes_count)
                    parseInt(likes)
                    dislikes=$(`.dislike_count${comment_pk}`).text(response.dislikes_count)
                    parseInt(dislikes)
                },
                error:function(response){
                    console.log('failed', response)
                }
            }) 
        });

    });
</script>

{% endblock %}






<div class="fh5co-parallax largerbanner" style="background-image: url(/static/images/fitnesspic2.jpg);">
	{% comment %} <div class="overlay"></div> {% endcomment %}
	<div class="container">
		<div class="row margintop">
            <div class="col-lg-4 col-md-5 col-sm-4 offset-md-1 offset-sm-1 col-6 mt-4 commentform">
                <div class="postlist ">
                    <h1 class="">Original Post</h1>
                    <div class="comment mt-4 text-justify float-left ">
                        {% if post.shared_user %}
                        {% comment %} <div class="d-flex"> {% endcomment %}
                            <a href="{% url 'show_profile_page' post.shared_user.profile.pk %}"> 
                                <img src="{{ post.shared_user.profile.picture.url }}" alt="" class="rounded-circle" width="40" height="40">
                                <small class="postauthor">{{ post.shared_user }}</small>
                            </a>
                            <p class="createdon">Shared a post on: {{ post.created_on }}</p>
                        
                        {% comment %} </div> {% endcomment %}
                        {% else %}
                            
                            <a href="{% url 'show_profile_page' post.author.profile.pk %}"> 
                                <img src="{{ post.author.profile.picture.url }}" alt="" class="rounded-circle" width="40" height="40">
                                <small class="postauthor">{{ post.author }}</small>
                            </a>
                            <p class="createdon">Posted on: {{ post.created_on }}</p>
                        {% endif %}
                        {% comment %} <small class="postauthor">
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </small> {% endcomment %}
                        {% comment %} </div> {% endcomment %}
                        {% comment %} <p class="createdon">{{ post.created_on }}</p> {% endcomment %}
                        {% comment %} <hr width="425" style="color: white;"> {% endcomment %}
                        {% if post.shared_body %}
                            <p>{{ post.shared_body }}</p>
                            <div class="sharedpost">
                                <a href="{% url 'show_profile_page' post.author.profile.pk %}"> 
                                    <img src="{{ post.author.profile.picture.url }}" alt="" class="rounded-circle" width="40" height="40">
                                    <small class="postauthor">{{ post.author }}</small>
                                </a>
                                <p class="createdon">{{ post.shared_on }}</p>
                                <p>{{ post.body }}</p>
                                {% if post.image %}
                                <div class="ajax_image" style="padding-bottom: 15px !important;">
                                    <img src="{{ post.image.url }}" class="" height="300" width="275"/>
                                </div>
                                {% endif %}
                                {% if post.video %}
                                    <video class="embed-responsive embed-responsive-16by9" controls="controls" height="300" width="275" style="padding-bottom: 15px !important;">
                                        <source src="{{post.video.url}}" type="video/mp4" />
                                    </video>
                                {% endif %}
                            </div>
                        {% else %}
                            <p>{{ post.body }}</p>
                            {% if post.image %}
                            <div class="ajax_image" style="padding-bottom: 15px !important;">
                                <img src="{{ post.image.url }}" class="" height="300" width="275"/>
                            </div>
                            {% endif %}
                            {% if post.video %}
                                <video class="embed-responsive embed-responsive-16by9" controls="controls" height="300" width="275" style="padding-bottom: 15px !important;">
                                    <source src="{{post.video.url}}" type="video/mp4" />
                                </video>
                            {% endif %}
                        {% endif %}
                    
                        <div class="d-flex flex-row ">
                            <form method="POST" action="{% url 'like' post.id %}" class="like-form" id="{{post.id}}">
                                {% csrf_token %}
                                {% if user not in post.likes.all %}
                                    <input type="hidden"  name="post_id" value="{{ post.id }}">
                                    <button class="remove-default-btn thumbs-btn like-btn{{post.id}}" type="submit">
                                        <i class="fa fa-thumbs-up thumbs like-icon{{post.id}}" ><span class="like_count{{post.id}}">{{ post.likes.all.count }}</span></i>
                                    </button>
                                {% else %}
                                    <input type="hidden" name="post_id" value="{{ post.id }}">
                                    <button class="remove-default-btn thumbs-btn thumbs-fillgreen like-btn{{post.id}}" type="submit">
                                        <i class="fa fa-thumbs-up thumbs like-icon{{post.id}}"><span class="like_count{{post.id}}">{{ post.likes.all.count }}</span></i>
                                    </button>
                                {% endif %}
                            </form>
                            
                            <form method="POST" action="{% url 'dislike' post.id %}" class="dislike-form thumb-buttons" id='{{post.id}}'>
                                {% csrf_token %}
                                {% if user not in post.dislikes.all %}
                                    <input type="hidden" name="post_id" value="{{ post.id }}">
                                    <button class="remove-default-btn thumbs-btn dislike-btn{{post.id}}" type="submit" >
                                        <i class="fa fa-thumbs-down thumbs dislike-icon{{post.id}}" > <span class="dislike_count{{post.id}}">{{ post.dislikes.all.count }}</span></i>
                                    </button>
                                {% else %}
                                    <input type="hidden" name="post_id" value="{{ post.id }}">
                                    <button class="remove-default-btn thumbs-btn thumbs-fillred dislike-btn{{post.id}}" type="submit" >
                                        <i class="fa fa-thumbs-down thumbs dislike-icon{{post.id}}" > <span class="dislike_count{{post.id}}">{{ post.dislikes.all.count }}</span></i>
                                    </button>
                                {% endif %}
                            </form>
                        </div>
                    </div>
                </div>
                <form method="POST" id="algin-form" class="greenbackground commentinput" enctype="multipart/form-data">
                    <div class="form-group">
                        {% csrf_token %}
                        {{ form | crispy }}
                    </div>
                    {% comment %} <div class="form-inline">
                        <input type="checkbox" name="check" id="checkbx" class="mr-1">
                    </div> {% endcomment %}
                    <div class="form-group">
                        <button id="post" class="btn">Comment</button>
                    </div>
                </form>
            </div>

            <div class="col-sm-5 col-md-6 col-6 pb-4 postlist commentssec">
            {% comment %} <div class="col-lg-4 col-md-5 col-sm-4 offset-md-1 offset-sm-1 col-12 mt-4 "> {% endcomment %}
                <h1 class="">Comments</h1>
                {% for comment in comments %}
                    <div class="comment commentdiv mt-4 text-justify float-left">
                        {% if comment.is_parent %}
                            <a href="{% url 'show_profile_page' comment.author.profile.pk %}"> 
                                <img src="{{ comment.author.profile.picture.url }}" alt="" class="rounded-circle" width="40" height="40">
                            </a>
                            <a class="text-primary post-link postauthor" href="{% url 'show_profile_page' comment.author.profile.pk %}">@{{ comment.author }}</a>
                            <p class="createdon">Commented on: {{ comment.created_on }}</p>
                        {% endif %}
                        <p>{{ comment.comment }}</p>
                        <div class="d-flex flex-row">
                            <form method="POST" action="{% url 'comment-like' post.pk comment.pk %}" class="like-form" id="{{comment.pk}}">
                                {% csrf_token %}
                                {% if request.user in comment.likes.all %}
                                    <input type="hidden" name="comment_pk" value="{{ comment.pk }}">
                                    <button class="remove-default-btn thumbs-btn thumbs-fillgreen like-btn{{comment.pk}}" type="submit">
                                        <i class="fa fa-thumbs-up thumbs like-icon{{comment.pk}}"> <span class="like_count{{comment.pk}}">{{ comment.likes.all.count }}</span></i>
                                    </button>
                                {% else %}
                                    <input type="hidden" name="comment_pk" value="{{ comment.pk }}">
                                    <button class="remove-default-btn thumbs-btn like-btn{{comment.pk}}" type="submit">
                                        <i class="fa fa-thumbs-up thumbs like-icon{{comment.pk}}" > <span class="like_count{{comment.pk}}">{{ comment.likes.all.count }}</span></i>
                                    </button>
                                {% endif %}
                            </form>
                            <form method="POST" action="{% url 'comment-dislike' post.pk comment.pk %}" class="dislike-form" id="{{comment.pk}}">
                                {% csrf_token %}
                                {% if request.user in comment.dislikes.all %}
                                    <input type="hidden" name="comment_pk" value="{{ comment.pk }}">
                                    <button class="remove-default-btn thumbs-btn thumbs-fillred dislike-btn{{comment.pk}}" type="submit">
                                        <i class="fa fa-thumbs-down thumbs dislike-icon{{comment.pk}}" > <span class="dislike_count{{comment.id}}">{{ comment.dislikes.all.count }}</span></i>
                                    </button>
                                {% else %}
                                    <input type="hidden" name="comment_pk" value="{{ comment.pk }}">
                                    <button class="remove-default-btn thumbs-btn dislike-btn{{comment.pk}}" type="submit">
                                        <i class="fa fa-thumbs-down thumbs dislike-icon{{comment.pk}}" > <span class="dislike_count{{comment.pk}}">{{ comment.dislikes.all.count }}</span></i>
                                    </button>
                                {% endif %}
                            </form> &nbsp;&nbsp;
                            <div>
                                <button class="remove-default-btn reply-button"><a href="{% url 'view-comment-reply' comment.pk %}">Replies: {{comment.children.all.count}}</a></button>
                            </div>
                            &nbsp;&nbsp;
                            <div>
                                <button class="remove-default-btn"><i class="far fa-comment-dots" onclick="commentReplyToggle('n{{ comment.pk }}')"></i></button>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
           
            

            

            
            {% comment %} </div> {% endcomment %}
        </div>
	</div>
    <div class="row justify-content-center mt-3">
        <div class="col-md-5 col-sm-12 position-relative">
          {% if comments.has_previous %}
            <a href="?page=1">&laquo First</a>
            <a href="?page={{ comments.previous_page_number }}">Previous</a>
          {% endif %}

          Page {{ comments.number }} of {{ comments.paginator.num_pages }}

          {% if comments.has_next %}
            <a href="?page={{ comments.next_page_number }}">Next</a>
            <a href="?page={{ comments.paginator.num_pages }}">Last &raquo</a>
          {% endif %}
        </div>
    </div>
</div>























<div class="col-sm-5 col-md-6 col-12 pb-4 postlist">
    <h1 class="">Public Posts</h1>
    {% for post in posts %}
        <div class="comment mt-4 text-justify float-left">
            {% if post.shared_user %}
            {% comment %} <div class="d-flex"> {% endcomment %}
                <a href="{% url 'show_profile_page' post.shared_user.profile.pk %}"> 
                    <img src="{{ post.shared_user.profile.picture.url }}" alt="" class="rounded-circle" width="40" height="40">
                    <small class="postauthor">{{ post.shared_user }}</small>
                </a>
                <p class="createdon">Shared a post on: {{ post.created_on }}</p>
            
            {% comment %} </div> {% endcomment %}
            {% else %}
                
                <a href="{% url 'show_profile_page' post.author.profile.pk %}"> 
                    <img src="{{ post.author.profile.picture.url }}" alt="" class="rounded-circle" width="40" height="40">
                    <small class="postauthor">{{ post.author }}</small>
                </a>
                <p class="createdon">Posted on: {{ post.created_on }}</p>
            {% endif %}
            {% comment %} <small class="postauthor">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </small> {% endcomment %}
            {% comment %} </div> {% endcomment %}
            {% comment %} <p class="createdon">{{ post.created_on }}</p> {% endcomment %}
            {% comment %} <hr width="425" style="color: white;"> {% endcomment %}
            {% if post.shared_body %}
                <p>{{ post.shared_body }}</p>
                <div class="sharedpost">
                    <a href="{% url 'show_profile_page' post.author.profile.pk %}"> 
                        <img src="{{ post.author.profile.picture.url }}" alt="" class="rounded-circle" width="40" height="40">
                        <small class="postauthor">{{ post.author }}</small>
                    </a>
                    <p class="createdon">{{ post.shared_on }}</p>
                    <p>{{ post.body }}</p>
                    {% if post.image %}
                    <div class="ajax_image" style="padding-bottom: 15px !important;">
                        <img src="{{ post.image.url }}" class="" height="300" width="275"/>
                    </div>
                    {% endif %}
                    {% if post.video %}
                        <video class="embed-responsive embed-responsive-16by9" controls="controls" height="300" width="275" style="padding-bottom: 15px !important;">
                            <source src="{{post.video.url}}" type="video/mp4" />
                        </video>
                    {% endif %}
                </div>
            {% else %}
                <p>{{ post.body }}</p>
                {% if post.image %}
                <div class="ajax_image" style="padding-bottom: 15px !important;">
                    <img src="{{ post.image.url }}" class="" height="300" width="275"/>
                </div>
                {% endif %}
                {% if post.video %}
                    <video class="embed-responsive embed-responsive-16by9" controls="controls" height="300" width="275" style="padding-bottom: 15px !important;">
                        <source src="{{post.video.url}}" type="video/mp4" />
                    </video>
                {% endif %}
            {% endif %}
          

            <a href="{% url 'post-detail' post.pk %}" class="postauthor">Comments:{{ comment.count }}</a>
            <div class="d-flex flex-row ">
                <form method="POST" action="{% url 'like' post.id %}" class="like-form" id="{{post.id}}">
                    {% csrf_token %}
                    {% if user not in post.likes.all %}
                        <input type="hidden"  name="post_id" value="{{ post.id }}">
                        <button class="remove-default-btn thumbs-btn like-btn{{post.id}}" type="submit">
                            <i class="fa fa-thumbs-up thumbs like-icon{{post.id}}" ><span class="like_count{{post.id}}">{{ post.likes.all.count }}</span></i>
                        </button>
                    {% else %}
                        <input type="hidden" name="post_id" value="{{ post.id }}">
                        <button class="remove-default-btn thumbs-btn thumbs-fillgreen like-btn{{post.id}}" type="submit">
                            <i class="fa fa-thumbs-up thumbs like-icon{{post.id}}"><span class="like_count{{post.id}}">{{ post.likes.all.count }}</span></i>
                        </button>
                    {% endif %}
                </form>
                
                <form method="POST" action="{% url 'dislike' post.id %}" class="dislike-form thumb-buttons" id='{{post.id}}'>
                    {% csrf_token %}
                    {% if user not in post.dislikes.all %}
                        <input type="hidden" name="post_id" value="{{ post.id }}">
                        <button class="remove-default-btn thumbs-btn dislike-btn{{post.id}}" type="submit" >
                            <i class="fa fa-thumbs-down thumbs dislike-icon{{post.id}}" > <span class="dislike_count{{post.id}}">{{ post.dislikes.all.count }}</span></i>
                        </button>
                    {% else %}
                        <input type="hidden" name="post_id" value="{{ post.id }}">
                        <button class="remove-default-btn thumbs-btn thumbs-fillred dislike-btn{{post.id}}" type="submit" >
                            <i class="fa fa-thumbs-down thumbs dislike-icon{{post.id}}" > <span class="dislike_count{{post.id}}">{{ post.dislikes.all.count }}</span></i>
                        </button>
                    {% endif %}
                </form>

                <form method="POST" action="{% url 'share-post' post.pk %}" class="nopadding" id="{{ post.pk }}" enctype="multipart/form-data">
                    {% csrf_token %}
                    {{ shareform | crispy }}
                    <div class="d-grid gap-2">
                        <button class="btn btn-success mt-3">Share</button>
                    </div>
                </form>
            </div>










            {% comment %} <h4>Jhon Doe</h4>
            <span>- 20 October, 2018</span>
            <br>
            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Accusamus numquam assumenda hic aliquam vero sequi velit molestias doloremque molestiae dicta?</p> {% endcomment %}
        </div>
    {% endfor %}
    {% comment %} <div class="text-justify darker mt-4 float-right">
        <img src="https://i.imgur.com/CFpa3nK.jpg" alt="" class="rounded-circle" width="40" height="40">
        <h4>Rob Simpson</h4>
        <span>- 20 October, 2018</span>
        <br>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Accusamus numquam assumenda hic aliquam vero sequi velit molestias doloremque molestiae dicta?</p>
    </div>
    <div class="comment mt-4 text-justify">
        <img src="https://i.imgur.com/yTFUilP.jpg" alt="" class="rounded-circle" width="40" height="40">
        <h4>Jhon Doe</h4>
        <span>- 20 October, 2018</span>
        <br>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Accusamus numquam assumenda hic aliquam vero sequi velit molestias doloremque molestiae dicta?</p>
    </div>
    <div class="darker mt-4 text-justify">
        <img src="https://i.imgur.com/CFpa3nK.jpg" alt="" class="rounded-circle" width="40" height="40">
        <h4>Rob Simpson</h4>
        <span>- 20 October, 2018</span>
        <br>
        <p >Lorem ipsum dolor sit, amet consectetur adipisicing elit. Accusamus numquam assumenda hic aliquam vero sequi velit molestias doloremque molestiae dicta?</p>
    </div> {% endcomment %}
</div>
</div>

































<div class="container">
    <div class="row mt-5">
        <div class="col-md-5 col-sm-6">
            <a href="{% url 'post-list' %}" class="btn btn-light ">Back To Posts</a>
        </div>
    </div>
    <div class="row justify-content-center mt-3">
        <div class="col-md-5 col-sm-12 border-bottom">
            {% if post.shared_user %}
                <div>
                    <a href="{% url 'show_profile_page' post.shared_user.profile.pk %}">
                        <img class="round-circle post-img" height="45" width="45" src="{{ post.shared_user.profile.picture.url }}" />
                    </a>
                    <p class="post-text">
                        <a class="text-primary post-link" href="{% url 'show_profile_page' post.shared_user.profile.pk %}">@{{ post.shared_user }}</a> shared a post on {{ post.shared_on }}
                    </p>
                </div>
            {% else %}
                <div>
                    <a href="{% url 'show_profile_page' post.author.profile.pk %}">
                        <img class="round-circle post-img" height="45" width="45" src="{{ post.author.profile.picture.url }}" />
                    </a>
                    <p class="post-text">
                        <a class="text-primary post-link" href="{% url 'show_profile_page' post.author.profile.pk %}">@{{ post.author }}</a> {{ post.created_on }}
                    </p>
                </div>
            {% endif %}
            {% if request.user == post.author %}
                <a href="{% url 'post-edit' post.pk %}" class="edit-color"><i class="far fa-edit" style="color: green"></i></a>
                <a href="{% url 'post-delete' post.pk %}" class="edit-color"><i class="fas fa-trash" style="color: red"></i></a>
                <small>**{{ user.username }} can edit/delete this post**</small>
            {% elif request.user == post.shared_user %}
                <a href="{% url 'post-delete' post.pk %}" class="edit-color"><i class="fas fa-trash" style="color: red"></i></a>
                <small>**{{ user.username }} can delete this Shared Post**</small>
            {% endif %}
            <br><br>
            {% if post.shared_body %}
                <div class="position-relative mb-3 body">
                    <p>{{ post.shared_body }}</p>
                    <a href="{% url 'post-detail' post.pk %}" class="stretched-link"></a>
                </div>
                <div class="shared-post">
                    <a href="{% url 'show_profile_page' post.author.profile.pk %}">
                        <img class="round-circle post-img" height="45" width="45" src="{{ post.author.profile.picture.url }}" />
                    </a>
                    <p class="post-text">
                        <a class="text-primary post-link" href="{% url 'show_profile_page' post.author.profile.pk %}">@{{ post.author }}</a> {{ post.created_on }}
                    </p>
                </div>
            {% endif %}
            <div class="shared-post position-relative">
                <div class="body">
                    <p>{{ post.body }}</p>
                </div>
                {% if post.image %}
                  <img src="{{ post.image.url }}" class="post-image" />
                {% endif %}
                {% if post.video %}
                    <video class="embed-responsive embed-responsive-16by9 post-image" controls="controls" >
                        <source src="{{post.video.url}}" type="video/mp4" />
                    </video>
                {% endif %}
            </div>

            <div class="d-flex flex-row">
                <form method="POST" action="{% url 'post-detail-like' post.pk %}">
                    {% csrf_token %}
                    {% if user not in post.likes.all %}
                        <input type="hidden" name="next" value="{{ request.path }}">
                        <button class="remove-default-btn" type="submit">
                            <i class="far fa-thumbs-up" ><span>{{ post.likes.all.count }}</span></i>
                        </button>
                    {% else %}
                        <input type="hidden" name="next" value="{{ request.path }}">
                        <button class="remove-default-btn" type="submit">
                            <i class="far fa-thumbs-up btn-success" ><span>{{ post.likes.all.count }}</span></i>
                        </button>
                    {% endif %}
                </form>
                <form method="POST" action="{% url 'post-detail-dislike' post.pk %}">
                    {% csrf_token %}
                    {% if user not in post.dislikes.all %}
                        <input type="hidden" name="next" value="{{ request.path }}">
                        <button class="remove-default-btn" type="submit">
                            <i class="far fa-thumbs-down" > <span>{{ post.dislikes.all.count }}</span></i>
                        </button>
                    {% else %}
                        <input type="hidden" name="next" value="{{ request.path }}">
                        <button class="remove-default-btn" type="submit">
                            <i class="far fa-thumbs-down btn-danger"> <span>{{ post.dislikes.all.count }}</span></i>
                        </button>
                    {% endif %}
                </form>
            </div>
        </div>
    </div>
    <div class="main-comment-section">
        {% include 'social/comments.html' %}
    </div>
    <div class="row justify-content-center mt-3">
        <div class="col-md-5 col-sm-12 position-relative">
          {% if comments.has_previous %}
            <a href="?page=1">&laquo First</a>
            <a href="?page={{ comments.previous_page_number }}">Previous</a>
          {% endif %}

          Page {{ comments.number }} of {{ comments.paginator.num_pages }}

          {% if comments.has_next %}
            <a href="?page={{ comments.next_page_number }}">Next</a>
            <a href="?page={{ comments.paginator.num_pages }}">Last &raquo</a>
          {% endif %}
        </div>
    </div>
</div>














 <form method="POST" action="{% url 'comment-like' post.pk comment.id %}" class="like-form" id={{comment.id}}>
                            {% csrf_token %}
                            {% if request.user in comment.likes.all %}
                                <input type="hidden" name="comment_id" value="{{ comment.id }}">
                                <button class="remove-default-btn like-btn{{comment.id}}" type="submit">
                                    <i class="far fa-thumbs-up like-icon{{comment.id}} btn-success" style="color: white;"> <span class="like_count{{comment.id}}">{{ comment.likes.all.count }}</span></i>
                                </button>
                            {% else %}
                                <input type="hidden" name="comment_id" value="{{ comment.id }}">
                                <button class="remove-default-btn like-btn{{comment.id}}" type="submit">
                                    <i class="far fa-thumbs-up like-icon{{comment.id}}" style="color: white;"> <span class="like_count{{comment.id}}">{{ comment.likes.all.count }}</span></i>
                                </button>
                            {% endif %}
                        </form>
                        <form method="POST" action="{% url 'comment-dislike' post.pk comment.id %}" class="dislike-form" id={{comment.id}}>
                            {% csrf_token %}
                            {% if request.user in comment.dislikes.all %}
                                <input type="hidden" name="comment_id" value="{{ comment.id }}">
                                <button class="remove-default-btn dislike-btn{{comment.id}}" type="submit">
                                    <i class="far fa-thumbs-down dislike-icon{{comment.id}} btn-success" style="color: white;"> <span class="dislike_count{{comment.id}}">{{ comment.dislikes.all.count }}</span></i>
                                </button>
                            {% else %}
                                <input type="hidden" name="comment_id" value="{{ comment.id }}">
                                <button class="remove-default-btn dislike-btn{{comment.id}}" type="submit">
                                    <i class="far fa-thumbs-down dislike-icon{{comment.id}}" style="color: white;"> <span class="dislike_count{{comment.id}}">{{ comment.dislikes.all.count }}</span></i>
                                </button>
                            {% endif %}
                        </form>









                             <form method="POST" action="{% url 'comment-like' post.pk comment.pk %}">
                                {% csrf_token %}
                                {% if user in comment.likes.all %}
                                    <input type="hidden" name="next" value="{{ request.path }}">
                                    <button class="remove-default-btn" type="submit">
                                        <i class="far fa-thumbs-up" style="color: green;"> <span>{{ comment.likes.all.count }}</span></i>
                                    </button>
                                {% else %}
                                    <input type="hidden" name="next" value="{{ request.path }}">
                                    <button class="remove-default-btn" type="submit">
                                        <i class="far fa-thumbs-up" style="color: white;"> <span>{{ comment.likes.all.count }}</span></i>
                                    </button>
                                {% endif %}
                            </form>
                            <form method="POST" action="{% url 'comment-dislike' post.pk comment.pk %}">
                                {% csrf_token %}
                                {% if user in comment.dislikes.all %}
                                    <input type="hidden" name="next" value="{{ request.path }}">
                                    <button class="remove-default-btn" type="submit">
                                        <i class="far fa-thumbs-down" style="color: green;"> <span>{{ comment.dislikes.all.count }}</span></i>
                                    </button>
                                {% else %}
                                    <input type="hidden" name="next" value="{{ request.path }}">
                                    <button class="remove-default-btn" type="submit">
                                        <i class="far fa-thumbs-down" style="color: white;"> <span>{{ comment.dislikes.all.count }}</span></i>
                                    </button>
                                {% endif %}
                            </form>
<!-- <script type="text/javascript">
    $(document).on('submit', '.reply-form', function(event){
        event.preventDefault();
        console.log($(this).serialize());
        $.ajax({
            type: 'POST',
            url: $(this).attr('action'),
            data: $(this).serialize(),
            dataType: 'json',
            success: function(response) {
                $('.main-comment-section').html(response['form']);
                $('textarea').val('');
                // function commentReplyToggle(parent_id) {
                //     const row = document.getElementById(parent_id);
                //     if (row.classList.contains('d-none')) {
                //         row.classList.remove('d-none');
                //     } else {
                //         row.classList.add('d-none');
                //     }
                //     $('textarea').val('');
                // };
            },
            error: function(rs, e) {
                console.log(rs.responseText);
            },
        });
    });
   
</script> -->


<!-- <div class="row justify-content-center mt-3">
    <div class="col-md-5 col-sm-12">
        { if comments.has_next %}
            <a class="infinite-more-link" href="?page={{ comments.next_page_number }}"></a>
        { endif %}
    </div>
</div>
{ if comments.has_next %}
<div class="d-flex justify-content-center" style="display:none;">
    <div class="spinner-border" role="status">
        <span class="sr-only">Loading...</span>
    </div>
</div>
{ else %}
{ endif %} -->



 // $(document).ready(function(){
    //      //like ajax call
    //     $('.like-form').submit(function(e){
    //         e.preventDefault();
    //         // const post_id=$(`.like-btn${post_id}`).val();
    //         // const post_id=$('.like-btn').val();

    //         const post_id=$(this).attr('id')
    //         const likeText = $(`.like-btn${post_id}`).text()
    //         const trim = $.trim(likeText)
    //         const url=$(this).attr('action') 
    //         let res;
    //         const like = $(`.like_count${post_id}`).text()
    //         // const trimCount = parseInt(like)
    //         // const token=$('input[name=csrfmiddlewaretoken]').val();
    //         $.ajax({
    //             method:"POST",
    //             url:url,
    //             // headers:{'X-CSRFToken': token},
    //             data:{
    //                 'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
    //                 'post_id':post_id,
    //             },
    //             success:function(response){
    //                 if(response.liked===true){
    //                     $(`.like-icon${post_id}`).addClass('btn-success')
    //                 }else{
    //                     $(`.like-icon${post_id}`).removeClass('btn-success')
    //                 }
    //                 if(response.disliked===true){
    //                     $(`.dislike-icon${post_id}`).addClass("btn-success")
    //                 }else{
    //                     $(`.dislike-icon${post_id}`).removeClass("btn-success")
    //                 }
    //                 likes=$(`.like_count${post_id}`).text(response.likes_count)
    //                 parseInt(likes)
    //                 dislikes=$(`.dislike_count${post_id}`).text(response.dislikes_count)
    //                 parseInt(dislikes)
    //             },
    //             error:function(response){
    //                 console.log("Failed ", response)
    //             }
    //         })
    //     });


    //     //dislike ajax call

    //     $('.dislike-form').submit(function(e){
    //         e.preventDefault();
    //         // const post_id=$(".dislike-btn").val();
    //         // const token=$('input[name=csrfmiddlewaretoken]').val();
    //         const post_id = $(this).attr('id')
    //         const dislikeText = $(`.dislike-btn${post_id}`).text()
    //         const trim = $.trim(dislikeText)
    //         const url =$(this).attr('action') 
    //         let res;
    //         const dislike = $(`.dislike_count${post_id}`).text()
    //         // const trimCount = parseInt(dislike)
    //         $.ajax({
    //             method:"POST",
    //             url:url,
    //             // headers:{"X-CSRFToken": token},
    //             data:{
    //                 'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
    //                 'post_id':post_id,
    //             },
    //             success:function(response){
    //                 if(response.disliked===true){
    //                   $(`.dislike-icon${post_id}`).addClass("btn-success")
    //                 }else{
    //                   $(`.dislike-icon${post_id}`).removeClass("btn-success")
    //                 }

    //                 if(response.liked===true){
    //                   $(`.like-icon${post_id}`).addClass('btn-success')
    //                 }else{
    //                   $(`.like-icon${post_id}`).removeClass('btn-success')
    //                 }
    //                 likes=$(`.like_count${post_id}`).text(response.likes_count)
    //                 parseInt(likes)
    //                 dislikes=$(`.dislike_count${post_id}`).text(response.dislikes_count)
    //                 parseInt(dislikes)
    //             },
    //             error:function(response){
    //                 console.log('failed', response)
    //             }
    //         }) 
    //     });

    // });


  <div class="row justify-content-center mt-3 mb-5">
        <div class="col-md-5 col-sm-12">
            <form method="POST">
                {% csrf_token %}
                {{ form | crispy }}
                <div class="d-grid gap-2">
                    <button class="btn btn-success mt-3">Submit!</button>
                </div>
            </form>
        </div>
    </div>
    {{comment_count}}
    <div class="infinite-container">
        {% for comment in comments %}
            <div class="infinite-item comments-container">
                {% if comment.is_parent %} 
                    <div class="row justify-content-center mt-3">
                    {% if comment.children %}
                        <div class="col-md-5 col-sm-12">
                    {% else %}
                        <div class="col-md-5 col-sm-12 border-bottom">
                    {% endif %}
                            <p>
                                <div>
                                    <a href="{% url 'show_profile_page' comment.author.profile.pk %}">
                                        <img class="round-circle post-img" height="45" width="45" src="{{ comment.author.profile.picture.url }}" />
                                    </a>
                                    <p class="post-text">
                                        <a class="text-primary post-link" href="{% url 'show_profile_page' comment.author.profile.pk %}">@{{ comment.author }}</a> {{ comment.created_on }}
                                    </p>
                                </div>
                                {% if request.user == comment.author %}
                                    <a href="{% url 'comment-delete' post.pk comment.pk %}" class="edit-color"><i class="fas fa-trash"></i></a>
                                {% endif %}
                            </p>
                            <p>{{ comment.comment }}</p>
                            <div class="d-flex flex-row">
                                <form method="POST" action="{% url 'comment-like' post.pk comment.pk %}">
                                    {% csrf_token %}
                                    {% if user in comment.likes.all %}
                                        <input type="hidden" name="next" value="{{ request.path }}">
                                        <button class="remove-default-btn" type="submit">
                                            <i class="far fa-thumbs-up" style="color: green;"> <span>{{ comment.likes.all.count }}</span></i>
                                        </button>
                                    {% else %}
                                        <input type="hidden" name="next" value="{{ request.path }}">
                                        <button class="remove-default-btn" type="submit">
                                            <i class="far fa-thumbs-up" style="color: white;"> <span>{{ comment.likes.all.count }}</span></i>
                                        </button>
                                    {% endif %}
                                </form>
                                <form method="POST" action="{% url 'comment-dislike' post.pk comment.pk %}">
                                    {% csrf_token %}
                                    {% if user in comment.dislikes.all %}
                                        <input type="hidden" name="next" value="{{ request.path }}">
                                        <button class="remove-default-btn" type="submit">
                                            <i class="far fa-thumbs-down" style="color: green;"> <span>{{ comment.dislikes.all.count }}</span></i>
                                        </button>
                                    {% else %}
                                        <input type="hidden" name="next" value="{{ request.path }}">
                                        <button class="remove-default-btn" type="submit">
                                            <i class="far fa-thumbs-down" style="color: white;"> <span>{{ comment.dislikes.all.count }}</span></i>
                                        </button>
                                    {% endif %}
                                </form>
                                <div>
                                  <!--   {% if comment.children %}
                                        <button class="remove-default-btn" style="color: white">Replies {{comment.children.all.count}}</button>
                                    {% endif %} -->
                                    {% if comment.children %}
                                        <a href="{% url 'view-comment-reply' comment.pk %}"><button class="remove-default-btn" style="color: white">Replies: {{comment.children.all.count}}</button></a>
                                    {% else %}
                                        <p>Replies: 0</p>
                                    {% endif %}
                                </div>
                                <div>
                                    <button class="remove-default-btn"><i class="far fa-comment-dots" style="color: white" onclick="commentReplyToggle('{{ comment.pk }}')"></i></button>
                                </div>
                            </div>
                        </div> 
                        <div class="row justify-content-center mt-3 mb-5 d-none" id="{{ comment.pk }}">
                            <div class="col-md-5 col-sm-12">
                                <form method="POST" action="{% url 'comment-reply' post.pk comment.pk %}">
                                    {% csrf_token %}
                                    {{ form | crispy }}
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-success mt-3">Submit!</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        {% if comment.children.0 %}
                            <div class="row justify-content-center mt-3 child-comment">
                                <div class="col-md-5 col-sm-12">
                                    <p>
                                        <div>
                                            <a href="{% url 'show_profile_page' comment.children.0.author.profile.pk %}">
                                                <img class="round-circle post-img" height="30" width="30" src="{{ comment.children.0.author.profile.picture.url }}" />
                                            </a>
                                            <p class="post-text">
                                                <a class="text-primary post-link" href="{% url 'show_profile_page' comment.children.0.author.profile.pk %}">@{{ comment.children.0.author }}</a> {{ comment.children.0.created_on }}
                                            </p>
                                        </div>
                                        {% if request.user == comment.children.0.author %}
                                            <a href="{% url 'comment-delete' post.pk comment.children.0.pk %}" class="edit-color"><i class="fas fa-trash"></i></a>
                                        {% endif %}
                                    </p>
                                    <p>{{ comment.children.0.comment }}</p>
                                </div>
                            </div>
                        {% endif %}
                        {% if comment.children.1 %}
                            <div class="row justify-content-center mt-3 child-comment">
                                <div class="col-md-5 col-sm-12">
                                    <p>
                                        <div>
                                            <a href="{% url 'show_profile_page' comment.children.1.author.profile.pk %}">
                                                <img class="round-circle post-img" height="30" width="30" src="{{ comment.children.1.author.profile.picture.url }}" />
                                            </a>
                                            <p class="post-text">
                                                <a class="text-primary post-link" href="{% url 'show_profile_page' comment.children.1.author.profile.pk %}">@{{ comment.children.1.author }}</a> {{ comment.children.1.created_on }}
                                            </p>
                                        </div>
                                        {% if request.user == comment.children.1.author %}
                                            <a href="{% url 'comment-delete' post.pk comment.children.1.pk %}" class="edit-color"><i class="fas fa-trash"></i></a>
                                        {% endif %}
                                    </p>
                                    <p>{{ comment.children.1.comment }}</p>
                                </div>
                            </div>
                        {% endif %}
                        {% if comment.children.2 %}
                            <div class="row justify-content-center mt-3 child-comment">
                                <div class="col-md-5 col-sm-12">
                                    <p>
                                        <div>
                                            <a href="{% url 'show_profile_page' comment.children.2.author.profile.pk %}">
                                                <img class="round-circle post-img" height="30" width="30" src="{{ comment.children.2.author.profile.picture.url }}" />
                                            </a>
                                            <p class="post-text">
                                                <a class="text-primary post-link" href="{% url 'show_profile_page' comment.children.2.author.profile.pk %}">@{{ comment.children.2.author }}</a> {{ comment.children.2.created_on }}
                                            </p>
                                        </div>
                                        {% if request.user == comment.children.2.author %}
                                            <a href="{% url 'comment-delete' post.pk comment.children.2.pk %}" class="edit-color"><i class="fas fa-trash"></i></a>
                                        {% endif %}
                                    </p>
                                    <p>{{ comment.children.2.comment }}</p>
                                </div>
                            </div>
                        {% endif %}
                    </div> 
                    {% if comment.children %}
                        <div class="row justify-content-center mt-3"><div class="col-md-5 col-sm-12 border-bottom"></div></div>
                    {% endif %}  
                {% endif %}
            </div>
        {% endfor %}
    </div>
    <div class="row justify-content-center mt-3">
        <div class="col-md-5 col-sm-12">
            {% if comments.has_next %}
                <a class="infinite-more-link" href="?page={{ comments.next_page_number }}"></a>
            {% endif %}
        </div>
    </div>
    {% if comments.has_next %}
    <div class="d-flex justify-content-center" style="display:none;">
        <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    {% else %}
    {% endif %}
</div>


   <div class="d-flex flex-row">
                <form method="POST" action="{% url 'post-detail-like' post.id %}" class="like-form" id="{{post.id}}">
                    {% csrf_token %}
                    {% if user not in post.likes.all %}
                        <input type="hidden"  name="post_id" value="{{ post.id }}">
                        <button class="remove-default-btn like-btn{{post.id}}" type="submit">
                            <i class="far fa-thumbs-up like-icon{{post.id}}"  style="color: white"><span class="like_count{{post.id}}">{{ post.likes.all.count }}</span></i>
                        </button>
                    {% else %}
                        <input type="hidden" name="post_id" value="{{ post.id }}">
                        <button class="remove-default-btn like-btn{{post.id}}" type="submit">
                            <i class="far fa-thumbs-up like-icon{{post.id}} btn-success"  style="color: white"><span class="like_count{{post.id}}">{{ post.likes.all.count }}</span></i>
                        </button>
                    {% endif %}
                </form>
                
                <form method="POST" action="{% url 'post-detail-dislike' post.id %}" class="dislike-form" id='{{post.id}}'>
                    {% csrf_token %}
                    {% if user not in post.dislikes.all %}
                        <input type="hidden" name="post_id" value="{{ post.id }}">
                        <button class="remove-default-btn dislike-btn{{post.id}}" type="submit" >
                            <i class="far fa-thumbs-down dislike-icon{{post.id}}"  style="color: white"> <span class="dislike_count{{post.id}}">{{ post.dislikes.all.count }}</span></i>
                        </button>
                    {% else %}
                        <input type="hidden" name="post_id" value="{{ post.id }}">
                        <button class="remove-default-btn dislike-btn{{post.id}}" type="submit" >
                            <i class="far fa-thumbs-down dislike-icon{{post.id}} btn-success"  style="color: white"> <span class="dislike_count{{post.id}}">{{ post.dislikes.all.count }}</span></i>
                        </button>
                    {% endif %}
                </form>

            </div>







   <div class="d-flex flex-row">
                <form method="POST" action="{% url 'like' post.pk %}">
                    {% csrf_token %}
                    {% if user not in post.likes.all %}
                        <input type="hidden" name="next" value="{{ request.path }}">
                        <button class="remove-default-btn" type="submit">
                            <i class="far fa-thumbs-up" style="color: white"><span>{{ post.likes.all.count }}</span></i>
                        </button>
                    {% else %}
                        <input type="hidden" name="next" value="{{ request.path }}">
                        <button class="remove-default-btn" type="submit">
                            <i class="far fa-thumbs-up" style="color: green"><span>{{ post.likes.all.count }}</span></i>
                        </button>
                    {% endif %}
                </form>
                <form method="POST" action="{% url 'dislike' post.pk %}">
                    {% csrf_token %}
                    {% if user not in post.dislikes.all %}
                        <input type="hidden" name="next" value="{{ request.path }}">
                        <button class="remove-default-btn" type="submit">
                            <i class="far fa-thumbs-down" style="color: white"> <span>{{ post.dislikes.all.count }}</span></i>
                        </button>
                    {% else %}
                        <input type="hidden" name="next" value="{{ request.path }}">
                        <button class="remove-default-btn" type="submit">
                            <i class="far fa-thumbs-down" style="color: green"> <span>{{ post.dislikes.all.count }}</span></i>
                        </button>
                    {% endif %}
                </form>
            </div>











































   <!--  <div class="row justify-content-center mt-3 mb-5"><div class="col-md-5 col-sm-12"> 
        <h4>{{comment_count}} {{comment.children.all.count}}</h4>
    </div></div> -->
    <!-- <div class="">
        <div class="blogBox"><h1>1</h1></div>
        <div class="blogBox moreBox"><h1>2</h1></div>
        <div class="blogBox moreBox"><h1>3</h1></div>
        <div style="display: none;" class="blogBox moreBox"><h1>4</h1></div>
        <div style="display: none;" class="blogBox moreBox"><h1>5</h1></div>
        <div style="display: none;" class="blogBox moreBox"><h1>6</h1></div>
        <div style="display: none;" class="blogBox moreBox"><h1>7</h1></div>
        <div style="display: none;" class="blogBox moreBox"><h1>8</h1></div>
        <div style="display: none;" class="blogBox moreBox"><h1>9</h1></div>
    </div>
    <div id="loadMore" style="">
        <a href="#">Load More</a>
    </div> -->
    <!-- <button class="fadebutton">Click to fade</button> -->
    <!-- <div class="ex"><h1>Hi</h1></div> -->
    <!-- <div class="infinite-container ex"> -->




           
                           <!--  <div id="loadMore" class="loadMore" style="">
                                <a href="#">Load More</a>
                            </div> -->
                        <!-- </div> -->


                     <!--    <div id="spinner-box" class=" spinner-box not-visible">
                            <div class="spinner-border text-primary" role="status"></div>
                        </div>
                        <div id="loading-box" class="loading-box">
                            <button class="btn btn-primary" id="load-btn" class="load-btn">Load more</button>
                        </div> -->


                       <!--  <div id="replies-box"></div>
                        <div id="spinner-box" class="not-visible"><div class="spinner-border text-primary" role="status"></div></div>
                        <div id="loading-box"><button class="btn btn-primary" id="load-btn">Load More</button></div> -->





  <!--   {% if comment.children %}
                                        <a href="{% url 'comment-reply' comment.pk %}"><button class="remove-default-btn" style="color: white">Replies {{comment.children.all.count}}</button></a>
                                    {% endif %} -->

<button class="remove-default-btn"><i class="far fa-comment-dots" style="color: white" onclick="commentReplyToggle('{{ comment.pk }}')"></i></button>
 <div class="row justify-content-center mt-3 mb-5 d-none" id="{{ comment.pk }}">
                            <div class="col-md-5 col-sm-12">
                                <form method="POST" action="{% url 'comment-reply' post.pk comment.pk %}">
                                    {% csrf_token %}
                                    {{ form | crispy }}
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-success mt-3">Submit!</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!-- <button class="viewreplies" style="color: white">Replies: {{ comment.children.all.count }}</button> -->
                        <!-- <div class="moreBox blogBox" id="replies-box" class="replies-box"> -->
                        {% for child_comment in comment.children %}
                            
                            <div class="row justify-content-center child-comment">
                                <div class="col-md-5 col-sm-12">
                                    <div>
                                        <a href="{% url 'show_profile_page' child_comment.author.profile.pk %}">
                                            <img class="round-circle post-img" height="30" width="30" src="{{ child_comment.author.profile.picture.url }}" />
                                        </a>
                                        <p class="post-text">
                                            <a class="text-primary post-link" href="{% url 'show_profile_page' child_comment.author.profile.pk %}">@{{ child_comment.author }}</a> replied on {{ child_comment.created_on }}
                                        </p>
                                    </div>
                                    {% if request.user == child_comment.author %}
                                        <a href="{% url 'comment-delete' post.pk child_comment.pk %}" class="edit-color"><i class="fas fa-trash"></i></a>
                                    {% endif %}
                                    
                                    <p>{{ child_comment.comment }}</p>
                                </div>
                            </div>
                            
                        {% endfor %}

 








                            {% for child_comment in comment.children %}
                                {% if child_comment.0 %}
                                    <div class="row justify-content-center child-comment">
                                        <div class="col-md-5 col-sm-12">
                                            <div>
                                                <a href="{% url 'show_profile_page' child_comment.author.profile.pk %}">
                                                    <img class="round-circle post-img" height="30" width="30" src="{{ child_comment.author.profile.picture.url }}" />
                                                </a>
                                                <p class="post-text">
                                                    <a class="text-primary post-link" href="{% url 'show_profile_page' child_comment.author.profile.pk %}">@{{ child_comment.author }}</a> replied on {{ child_comment.created_on }}
                                                </p>
                                            </div>
                                            {% if request.user == child_comment.author %}
                                                <a href="{% url 'comment-delete' post.pk child_comment.pk %}" class="edit-color"><i class="fas fa-trash"></i></a>
                                            {% endif %}
                                            
                                            <p>{{ child_comment.comment }}</p>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}





    



  